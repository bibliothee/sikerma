import{a as w,b as E,r as I,e as _,o as a,c as y,w as g,f as N,h as l,i as n,u as e,j as $,k as v,l as c,m as S,p as d,t as h,F as M,q as T,v as A,T as D,s as F,x as H}from"./entry.de6d25ce.js";import{b as V,T as B,a as q,u as O,E as C,_ as P,w as j}from"./base.5d4074f1.js";import{k as z}from"./objects.3a5f1a29.js";import{u as K}from"./composables.91874a48.js";import{u as L}from"./fetch.06229beb.js";const R=["light","dark"],W=V({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:z(B),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:R,default:"light"}}),G={close:f=>f instanceof MouseEvent},J=w({name:"ElAlert"}),Q=w({...J,props:W,emits:G,setup(f,{emit:i}){const m=f,{Close:u}=q,p=E(),t=O("alert"),r=I(!0),o=_(()=>B[m.type]),b=_(()=>[t.e("icon"),{[t.is("big")]:!!m.description||!!p.default}]),k=_(()=>({[t.is("bold")]:m.description||p.default})),x=s=>{r.value=!1,i("close",s)};return(s,le)=>(a(),y(D,{name:e(t).b("fade"),persisted:""},{default:g(()=>[N(l("div",{class:n([e(t).b(),e(t).m(s.type),e(t).is("center",s.center),e(t).is(s.effect)]),role:"alert"},[s.showIcon&&e(o)?(a(),y(e(C),{key:0,class:n(e(b))},{default:g(()=>[(a(),y($(e(o))))]),_:1},8,["class"])):v("v-if",!0),l("div",{class:n(e(t).e("content"))},[s.title||s.$slots.title?(a(),c("span",{key:0,class:n([e(t).e("title"),e(k)])},[S(s.$slots,"title",{},()=>[d(h(s.title),1)])],2)):v("v-if",!0),s.$slots.default||s.description?(a(),c("p",{key:1,class:n(e(t).e("description"))},[S(s.$slots,"default",{},()=>[d(h(s.description),1)])],2)):v("v-if",!0),s.closable?(a(),c(M,{key:2},[s.closeText?(a(),c("div",{key:0,class:n([e(t).e("close-btn"),e(t).is("customed")]),onClick:x},h(s.closeText),3)):(a(),y(e(C),{key:1,class:n(e(t).e("close-btn")),onClick:x},{default:g(()=>[T(e(u))]),_:1},8,["class"]))],64)):v("v-if",!0)],2)],2),[[A,r.value]])]),_:3},8,["name"]))}});var U=P(Q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const X=j(U);const Y={class:"flex min-h-screen items-center justify-center bg-gradient-to-t from-[#ebf4f5] to-[#b5c6e0]"},Z={key:0,class:"p-5 text-center"},ee=l("h2",{class:"mb-10 text-3xl font-bold md:text-5xl"},"Please wait...",-1),te=l("h4",{class:"mb-5 text-xl font-semibold text-primary sm:text-2xl"},"Thank you for visiting us.",-1),se=l("p",{class:"text-base"},[d(" We are currently working on making some improvements "),l("br",{class:"hidden sm:block"}),d("to give you better user experience. "),l("br"),l("br"),d("If you are not automatically redirected, please click the button below. ")],-1),oe={key:1,class:"text-center"},ae=l("h2",{class:"mb-5 text-xl font-bold md:text-3xl"},"Oops... it seems something went wrong.",-1),ue=w({__name:"callback",setup(f){K({title:"SSO lander"});const i=I(),m=F();H(()=>{(async()=>{var k;const p=m.query.token,t=m.query.from,r=new FormData;r.append("token",p+""),r.append("fromClient",t+"-1");const{data:o,error:b}=await L("https://sikerma.poltekkes-smg.ac.id/library/sso_callback.php",{method:"post",body:r},"$Ns67bKnlM7");b.value&&(i.value=(k=b.value)==null?void 0:k.data.message,console.error(i.value)),o.value&&(localStorage.setItem("token",o.value.token),localStorage.setItem("member_id",o.value.member.id),localStorage.setItem("member_name",o.value.member.name),localStorage.setItem("member_expire",o.value.member.expire),localStorage.setItem("member_type",o.value.member.type),localStorage.setItem("member_email",o.value.member.email),localStorage.setItem("member_image",o.value.member.image),localStorage.setItem("prodi",o.value.member.prodi),u())})()});const u=()=>{window.location.href="/member/"};return(p,t)=>{const r=X;return a(),c("div",Y,[e(i)?(a(),c("div",oe,[ae,T(r,{title:e(i),effect:"dark",type:"error",closable:!1},null,8,["title"]),l("button",{onClick:u,class:"btn btn-primary mx-auto mt-5 w-max"},"Back to Home")])):(a(),c("div",Z,[ee,te,se,l("button",{onClick:u,class:"btn btn-primary mx-auto mt-5 w-max"},"Back to Home")]))])}}});export{ue as default};
